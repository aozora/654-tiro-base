<script lang="ts">
	// PROPS
	import { getCldImageUrl } from 'svelte-cloudinary';

	export let picture: string;
	export let name: string;
	export let className: string = '';
	export let size: number = 24;
	export let index: number;

	let initials: string;
	$: initials = name[0] + name[1];

	const getPictureUrl = (publicId: string) => {
		return getCldImageUrl({
			width: size + 3,
			height: size + 3,
			src: publicId
		});
	};
</script>

<div class="avatar" class:className style:--size={`${size}px`}>
	{#if picture}
		<img src={getPictureUrl(picture)} alt="" class="avatar-picture" />
	{:else}
		<span class="avatar-initials">{initials}</span>
	{/if}

	{#if index === 0}
		<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 100 100"
		>
			<path
				fill="#F19534"
				d="M73.844 17.04a5.695 5.695 0 0 0 3.226-5.126 5.687 5.687 0 1 0-10.48 3.06 5.684 5.684 0 0 0 2.402 2.096c-2.25 12.188-5.703 21.258-18.555 23.196 0 0 3.461 17.304 19.649 17.304 16.187 0 17.828-17.133 17.828-17.133-13.133.672-14.242-15.835-14.07-23.398v.001Z"
			/>
			<path
				fill="#F19534"
				d="M27.14 17.04a5.695 5.695 0 0 1-3.226-5.126 5.687 5.687 0 1 1 10.48 3.06 5.684 5.684 0 0 1-2.402 2.096c2.25 12.188 5.703 21.258 18.555 23.196 0 0-3.461 17.304-19.65 17.304-16.186 0-17.82-17.125-17.82-17.125 13.126.664 14.236-15.843 14.064-23.406l-.001.001Z"
			/>
			<path
				fill="#FFCA28"
				d="M69.867 57.57c.07 0 .14.008.21.008 4.462 0 7.814-1.305 10.329-3.187l-10.54 3.18Z"
			/>
			<path
				fill="#FFCA28"
				d="M93.156 13.172c-2.601-.352-5.086 2.125-5.54 5.515-.28 2.118.291 4.094 1.391 5.368l-1.874 7.773S84.266 50.195 69.78 53.82c-11.577 2.9-15.772-18.297-16.788-24.843a6.687 6.687 0 0 0-.401-12.172 6.685 6.685 0 0 0-5.12 0 6.684 6.684 0 0 0-3.1 9.733A6.674 6.674 0 0 0 47.133 29c-.805 6.46-4.352 26.953-16.852 24.813-12.687-2.18-18.226-23.547-19.508-29.36 1.524-1.25 2.375-3.453 2.063-5.82-.453-3.399-3.14-5.836-6-5.453s-4.805 3.445-4.352 6.836c.328 2.468 1.844 4.43 3.743 5.172l9.937 61.742s8.672 6.851 33.867 6.851c25.196 0 33.867-6.851 33.867-6.851l9.96-61.907c1.61-.843 2.876-2.742 3.189-5.07.46-3.398-1.282-6.43-3.891-6.781Z"
			/>
			<path
				fill="#1B3A4B"
				d="M50.344 78.055c4.202 0 7.61-4.061 7.61-9.07 0-5.01-3.408-9.07-7.61-9.07-4.203 0-7.61 4.06-7.61 9.07 0 5.009 3.407 9.07 7.61 9.07Z"
			/>
			<path
				fill="#006466"
				d="M50.344 62.156c.297.328.562.93 0 2.102-.563 1.172-3.594 2.758-4.149 3.078-.554.328-.922.18-1.093.047-.82-.656-.508-2.14.023-3.047 1.14-1.961 3.555-3.984 5.22-2.18Z"
			/>
			<path
				fill="#144552"
				d="M49.781 72.367c-.86.414-3.68 1.672-2.75 3.164.547.883 1.68 1.258 2.719 1.305 1.04.047 2.063-.281 2.984-.758 4.375-2.266 4.727-8.22 3.875-8.672-.875-.47-1.468.742-1.922 1.258a15.832 15.832 0 0 1-4.906 3.703Z"
			/>
			<path
				fill="#1B3A4B"
				d="M92.258 61.563c1.219-6.743-3.313-8.43-3.313-8.43s-2.922-.531-4.297 7.054c-1.375 7.579 1.547 8.11 1.547 8.11s4.836.008 6.063-6.734Z"
			/>
			<path
				fill="#006466"
				d="M90.242 55.438c1.063 1.421-.195 3.523-2.234 4.921-.602.414-1.399.258-1.516-.086-.328-.984-.187-2.101.25-3.046 1.297-2.836 2.961-2.507 3.5-1.789Z"
			/>
			<path
				fill="#1B3A4B"
				d="M7.625 61.766c-1.227-6.735 3.313-8.43 3.313-8.43s2.921-.531 4.296 7.055c1.375 7.578-1.546 8.109-1.546 8.109s-4.844.008-6.063-6.734Z"
			/>
			<path
				fill="#006466"
				d="M12.328 55.625c1.047.781.617 1.805-.172 2.516-.898.82-1.586 1.718-2.351 2.648-.117.14-.25.297-.438.336-.36.078-.648-.29-.765-.64-.336-.985-.274-2.141.226-3.047 1.422-2.586 3.094-2.118 3.5-1.813Z"
			/>
			<path
				fill="#4D194D"
				d="M78.117 68.094c-.54 3.07-3 5.203-5.508 4.765-2.507-.437-2.851-3.054-2.312-6.125.539-3.07 1.75-5.421 4.25-4.984 2.508.438 4.11 3.28 3.57 6.344Zm-54.344 0c.54 3.07 3 5.203 5.508 4.765 2.508-.437 2.852-3.054 2.313-6.125-.54-3.07-1.75-5.421-4.25-4.984-2.5.438-4.103 3.28-3.571 6.344Z"
			/>
			<path
				fill="#FFA8A4"
				fill-opacity=".1"
				d="M27.406 66.047c-.57.64-1.96 1.93-2.453.945-.672-1.344.258-3.375 1.32-4.047 1.063-.672 1.93-.14 2.079.461.18.766-.438 2.064-.946 2.641Zm44.454 1.961c-.774-.117-.86-2.781 1.218-4.875.992-1 2.414.187 2.055 1.789-.344 1.523-1.859 3.305-3.273 3.086Z"
			/>
			<path
				fill="#FFCA28"
				d="M85.273 76.727c-4.68 2.343-15.414 8.585-35.234 8.585s-30.555-6.242-35.234-8.585c0 0-1.68.898-1.68 1.835v7.196c0 .96.508 1.844 1.336 2.336 3.656 2.156 14.797 7.25 35.586 7.25 20.789 0 31.93-5.094 35.586-7.25a2.715 2.715 0 0 0 1.336-2.336v-7.195c-.016-.938-1.696-1.836-1.696-1.836Z"
			/>
			<path
				fill="#FFF59D"
				d="M30.938 86.594c2.187.43 2.851.617 2.703 1.836-.305 2.398-5.282 1.828-8.227 1.054-6.086-1.6-7.32-3.289-7.32-4.796 0-1.383 1.062-1.547 2.703-.97 1.96.696 4.993 1.868 10.141 2.876Z"
			/>
			<path
				stroke="#F19534"
				stroke-linecap="round"
				stroke-miterlimit="10"
				stroke-width="4"
				d="M85.273 78.305s-12.945 7.328-35.234 7.328c-22.29 0-35.234-7.328-35.234-7.328"
			/>
			<path
				fill="#FFCA28"
				d="M21.07 38.727c4.157-2.97 6.391-8.29 6.586-16.758.016-.766.235-.992.65-1.04.663-.07.772.532.764.962-.187 9.14-1.35 14.851-5.96 18.07-.227.156-1.844 1.14-2.532.46-.82-.796.227-1.507.492-1.694Zm3.805-26.587c-.133-1.413.195-3.96 3.906-5.117 1.086-.335 1.758.196 1.883.61.313 1.031-.594 1.437-1.008 1.57-2.85.922-2.992 2.344-3.578 3.25-.586.906-1.156.116-1.203-.313ZM61.11 36.852c3.757-3.336 6.25-7.063 7.89-15.547.148-.75.367-.953.773-.938.665.016.696.633.625 1.055-1.39 9.047-2.71 11.625-7.343 16.758-.524.578-1.797 1.101-2.516.5-.648-.54.103-1.407.571-1.828Zm5.53-24.642c-.132-1.413.196-3.96 3.907-5.116 1.086-.336 1.758.195 1.883.61.312 1.03-.594 1.437-1.008 1.57-2.852.921-2.992 2.343-3.578 3.25-.578.906-1.156.117-1.203-.313Z"
			/>
			<path
				fill="#FFF59D"
				d="M24.68 55.953c-9.078-4.117-11.75-14.86-13.172-19.523-.188-.617-.094-1.203.523-1.39.617-.188.985.21 1.18.827 1.031 3.383 5.039 14.68 13.312 17.89.602.235 1.54.806 1.032 1.782-.336.633-1.414 1.078-2.875.414ZM9.906 19.243c-.437-.907-.617-1.766-3-2.759-.601-.25-1-.804-.836-1.43.164-.624.79-1.093 1.696-.937 2.945.508 3.586 3.5 3.71 4.54.118 1-1.124 1.491-1.57.585Zm65.774 36.71c9.078-4.117 11.75-14.86 13.172-19.523.187-.617.093-1.203-.524-1.39-.617-.188-.984.21-1.18.827-1.03 3.383-5.039 14.68-13.312 17.89-.602.235-1.54.806-1.031 1.782.336.633 1.414 1.078 2.875.414Zm14.773-36.71c.438-.907.617-1.766 3-2.759.602-.25 1-.804.836-1.43-.164-.624-.789-1.093-1.695-.937-2.946.508-3.586 3.5-3.711 4.54-.117 1 1.133 1.491 1.57.585ZM46.39 23.085c.477-.977 1.313-2.313 4.04-2.875 1.047-.219 1.351-.672 1.258-1.36-.188-1.43-1.97-1.328-2.93-1.1-3.203.75-3.914 3.593-4.047 4.718-.133 1.07 1.209 1.593 1.679.617Z"
			/>
		</svg
		>
	{/if}

	<div class="position">{index + 1}</div>
	<strong>{name}</strong>
</div>

<style lang="scss">
  .avatar {
    position: relative;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    width: var(--size);
    height: var(--size);
    border-radius: 50%;
    background-color: var(--color-brand);
  }

  .avatar-picture {
    width: var(--size);
    max-width: none;
    height: var(--size);
    object-fit: cover;
    border-radius: 50%;
    border: 3px solid #c7f064;
  }

  .avatar-initials {
    font-size: var(--text-scale-20);
    --text-weight: var(--font-weight-bold);
    font-variation-settings: 'wght' var(--text-weight);
    text-transform: uppercase;
  }

  svg {
    position: absolute;
    top: -22%;
    left: 50%;
    width: var(--size);
    height: var(--size);
    transform: translate(-50%, -50%);
  }

	strong {
    position: absolute;
    top: 130%;
    left: 50%;
    transform: translate(-50%, -50%);

		@media (min-width: 64em){
			font-size: var(--text-scale-24);
		}
  }

  .position {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    justify-content: center;
    align-items: center;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background-color: #c7f064;
    font-weight: var(--font-weight-bold);
    font-variation-settings: 'wght' var(--font-weight-bold);
    color: var(--color-black);

    @media (min-width: 64em){
      width: 40px;
      height: 40px;
    }
  }
</style>
